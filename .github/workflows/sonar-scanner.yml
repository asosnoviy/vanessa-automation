name: Docker Image CI

on:
  pull_request:
    branches: 
      - develop
  push:
      branches: 
        - develop  

jobs:
   
  build:
 
    runs-on: ubuntu-latest
 
    steps:
    - name: checkout
      uses: actions/checkout@v1
    - name: Setup sonarqube
      uses: warchant/setup-sonar-scanner@v1
    - name: Run sonarqube
      env: 
      # to get access to secrets.SONAR_TOKEN, provide GITHUB_TOKEN
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      run: sonar-scanner
       -Dsonar.login=${{ secrets.SONAR_TOKEN }}
       -Dsonar.host.url=https://sonar.openbsl.ru
       -Dsonar.projectKey=VA
       -Dsonar.branch.target=develop
       -Dsonar.branch.name=test
        
